openapi: 3.0.0
info:
  title: VU RCON API
  description: API Routes for Venice Unleashed RCON Tool
  version: 0.1.9
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: jwt
tags:
  - name: auth
    description: routes which handle authentication stuff
  - name: instance
    description: instance related routes
paths:
  /api/auth/login:
    post:
      summary: tries to login to an account
      description: |
        Tries to login to an account with given credentials |
        on success it will yield an json web token
      tags:
        - "auth"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: retrieves a jwt
          content:
            application/json:
              schema: 
                type: object
                properties:
                  token:
                    type: string

  /api/instances:
    get:
      summary: retrieve all available instances
      description: |
        retrieve a list of instances you have access to
      tags:
        - "instance"
      security:
        - bearerAuth: []
      responses:
        '200':
          description: array of instances
          content:
            application/json:
              schema:
                $ref: "schemes/Instance.yaml#/Instances"
    post:
      summary: creates a rcon instance
      description: |
        creates a new rcon instance and tries to connect to it
      tags:
        - "instance"
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                host:
                  type: string
                port:
                  type: number
                password:
                  type: string
      responses:
        '200':
          description: instance has been created
          content:
            application/json:
              schema:
                $ref: "schemes/Instance.yaml#/Instance"

  /api/instances/{id}/start:
    patch:
      summary: starts an rcon connection
      description: |
        starts an already created rcon connection
        if the instance is already started it will throw an error
      tags:
        - "instance"
      security:
        - bearerAuth: []    
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: id of the instance to start
      responses:
        '200':
          description: instance has been started successfully

  /api/instances/{id}/stop:
    patch:
      summary: creates a rcon instance
      description: |
        stops a started rcon connection
        if the instance is already stopped it will throw an error
      tags:
        - "instance"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: id of the instance to start
      responses:
        '200':
          description: instance has been started successfully
  /api/instances/{id}:
    get:
      summary: retrieves info about a single instance
      description: |
        gets the informations from a single instance
      tags:
        - "instance"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: id of the instance to remove
      responses:
        '200':
          description: instance has been removed successfully
          content:
            application/json:
              schema:
                $ref: "schemes/Instance.yaml#/Instance"
    delete:
      summary: removes an instance
      description: |
        removes an instance completely
      tags:
        - "instance"
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: id of the instance to remove
      responses:
        '200':
          description: instance has been removed successfully